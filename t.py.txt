import numpy as np

def getAllocArray(mapping, facIDs, secIDs):
    # Calculate the allocation table between facilities and securities
    # TO DO: This now accepts input data with facilities, we must ensure that the
    # order of securities in the returned array makes sense
    # TO DO: Check how this will behave for a case with a facility to which no
    # securities are allocated.

    allocArray = np.zeros((len(facIDs), len(secIDs)), dtype=bool)
    mappingFacilities = list(mapping.keys())

    for iRow in range(len(mappingFacilities)):
        fID = mappingFacilities[iRow]
        row = facIDs.index(fID)
        sIDs = mapping[fID]
        for iSec in range(len(sIDs)):
            col = secIDs.index(sIDs[iSec])
            allocArray[row, col] = True

    aa = FlowValueHolder(allocArray)
    return aa
